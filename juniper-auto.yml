name: juniper
mgmt:
  network: isp-bgp
  ipv4-subnet: 172.90.90.0/24
topology:
  nodes:

    rt-ixa:
      kind: nokia_srlinux
      #mgmt-ipv4: 172.80.80.5
      image: ghcr.io/nokia/srlinux:24.10.1
      type: ixr-d3
      startup-config: configs/rt-ixa.cfg 

    rt-ufinet:
      kind: nokia_srlinux
      #mgmt-ipv4: 172.80.80.5
      image: ghcr.io/nokia/srlinux:24.10.1
      type: ixr-d3
      startup-config: configs/rt-ufinet.cfg 

    switch-wan:
      kind: cisco_iol
      #mgmt-ipv4: 172.80.80.5
      image: arthurk99/cisco-iol-l2:17.15.01 
      type: L2
    
    switch-agr:
      kind: cisco_iol
      #mgmt-ipv4: 172.80.80.5
      image: arthurk99/cisco-iol-l2:17.15.01 
      type: L2
    
    rt-core:
      kind: juniper_vmx
      mgmt-ipv4: 172.90.90.7
      image: vrnetlab/juniper_vmx:18.2R1.9
      #startup-config: configs/vmx.cfg
  
    srvweb:
       kind: linux
       image: docker.io/esanchezv/srvhttps:latest

    PC-corpo:
      kind: linux
      image: esanchezv/kali-python3:latest
      exec:
        - ip -6 address add 2001:db8:ca01::2/64 dev eth1
        #- ip -6 route del default dev eth0
        - ip -6 route add default via 2001:db8:ca01::1   
        
    nornir:
      kind: linux
      image: esanchezv/kali-python3:latest 
      binds:
       - configs/nornir.sh:/root/nornir.sh
       - scripts:/root/scripts
      exec:
       - python3 -m pip config set global.break-system-packages true
       - chmod +x /root/nornir.sh
       - bash /root/nornir.sh    
   
  links:
    - endpoints: ["rt-ixa:e1-1", "rt-core:eth1"]
    - endpoints: ["rt-ufinet:e1-1", "rt-core:eth2"]
    - endpoints: ["rt-ixa:e1-2", "switch-wan:eth1"]
    - endpoints: ["rt-ufinet:e1-2", "switch-wan:eth2"]
    - endpoints: ["srvweb:eth1", "switch-wan:eth3"]
    - endpoints: ["rt-core:eth3", "switch-agr:eth1"]
    - endpoints: ["PC-corpo:eth1", "switch-agr:eth2"]
    - endpoints: ["nornir:eth1", "switch-agr:eth3"]
    
